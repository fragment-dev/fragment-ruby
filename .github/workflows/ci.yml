name: CI

on:
  pull_request:
    types: [opened, reopened, synchronize, ready_for_review]

jobs:
  ci:
    name: CI
    runs-on: ubuntu-latest
    strategy:
      matrix:
        ruby: ['3.3', '3.2', '3.1']

    steps:
        - uses: actions/checkout@v2
    
        - name: Setup Ruby
          uses: ruby/setup-ruby@v1
          with:
            ruby-version: ${{ matrix.ruby }}
    
        - name: Bundle install
          run: |
            gem install bundler
            bundle install --jobs 4 --retry 3
    
        - name: Run tests
          run: bundle exec rake test